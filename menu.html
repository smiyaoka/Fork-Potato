<!doctype html>
<html lang="en"> 
<head>
	<meta charset="utf-8">
	<title>Home Screen</title>
    <link type="text/css" rel="stylesheet" href="css/base.css"> 
    <script src="https://www.gstatic.com/firebasejs/3.9.0/firebase.js"></script>


<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyB8EekPhs6qYLXCxCi0oyypG3f25MlBFFY",
    authDomain: "project-fork-and-potato.firebaseapp.com",
    databaseURL: "https://project-fork-and-potato.firebaseio.com",
    projectId: "project-fork-and-potato",
    storageBucket: "project-fork-and-potato.appspot.com",
    messagingSenderId: "119574546255"
  };
  
  firebase.initializeApp(config);

</script>
</head> 

<script>
		var database = firebase.database();
		var ref = database.ref('users');

		firebase.auth().onAuthStateChanged(function(user) {
		  if (user) {
			// User is signed in.
			alert("Welcome to Fork&Potato");
			// console.log(firebase.auth().currentUser.uid);
		  } else {
			//alert("You're not logged in!");
		  }
		});

		function signIn(acc, pw) {
		
			 var email = document.getElementById('account').value;
			 var password = document.getElementById('passWord').value;
			 var checker = false;

			// Sign in with email and password
			firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
			
				
			  //error case
			  var errorCode = error.code;
			  var errorMessage = error.message;
			  
			  if (errorCode === 'auth/wrong-password') {
				alert('Wrong password.');
			  } else {
				alert(errorMessage);
			  }
			  console.log(error);
	  

			});
			
		}
						
			function signUp(acc, pw) {
				 var email = document.getElementById('account').value;
				 var password = document.getElementById('passWord').value;
				  

					// signup with email and password
				  firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
					
					// error case
					var errorCode = error.code;
					var errorMessage = error.message;
					
					if (errorCode == 'auth/weak-password') {
					  alert('The password is too weak.');
					} else {
					  alert(errorMessage);
					}
					console.log(error);
					 
				  });
				  
				firebase.auth().onAuthStateChanged(function(user) {
				  if (user) {
					// declare and initialize data right after user sign up
					
					 console.log(firebase.auth().currentUser.uid);
					   firebase.database().ref('users/' + firebase.auth().currentUser.uid).set({
					   
						easter: "0",
						email: firebase.auth().currentUser.email
						
					  });
					  
				  } else {
					
				  }
				  
				});
				
			}
		
			function signOut() {
			firebase.auth().signOut().then(function() {
			  alert("You've signed out!");
			}).catch(function(error) {
			  // An error happened.
			});
			}

		
		
		
</script>


<body> 
    <div id="headerContainer">
        <a href="#loginScreen"><button type="button" onclick="#loginScreen" id="loginBtn">Login</button></a>
        
        <div id="loginScreen">
			<form >
					  E-mail:<br>
					  <input type="text" id="account" name="account" value="email@yolo.com">
					  <br>
					  Password:<br>
					  <input type="text" id="passWord" name="passWord" value="password">
					  <br><br>
					  <input type="button" value="Log In" onclick= "signIn('account', 'passWord');">
					  <input type="button" value="Log out" onclick= "signOut();">
					    <input type="button" value="Register" onclick= "signUp('account2', 'passWord2');">
				</form> 
		<a href="#" class="cancel">&times;</a> </div> 
			<div id="cover" > 
				
			</div>
        
    <div id="runningContainer">
    </div>
        
        
        <div id="menuContainer">
        <div class="menuBtn" id="btnNewGame">
            <a href="level.html"><button type="button" id="menuNewGame">New Game</button></a>
            
        </div>
        <div class="menuBtn" id="btnBottom">
            <a href="affiliatedApps.html"><button type="button" id="menuAffilitrated">Affilitrated Sites</button></a>
            <button type="button" id="menuQuit">Quit</button>
        </div>
    </div>
        
</div>
       
        
<script>
function openNav() {
    document.getElementById("myNav").style.height = "100%";
}

function closeNav() {
    document.getElementById("myNav").style.height = "0%";
}

</script>
    
</body>

</html>